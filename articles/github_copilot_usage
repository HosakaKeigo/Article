# ã¯ã˜ã‚ã«
**GitHub Copilot**ã‚’å°å…¥ã—ã¦ã€ç­†è€…ã®é–‹ç™ºåŠ¹ç‡ã¯é–“é•ã„ãªãä¸ŠãŒã‚Šã¾ã—ãŸã€‚ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¨ãã¯ç‰¹ã«ãŠä¸–è©±ã«ãªã£ã¦ã„ã¾ã™ã€‚

ä½“æ„Ÿã§ã¯é–‹ç™ºåŠ¹ç‡ã¯é–“é•ã„ãªãä¸ŠãŒã£ãŸã®ã§ã™ãŒã€å®Ÿéš›ã©ã®ãã‚‰ã„åŠ©ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‹å®šé‡çš„ã«è¨ˆæ¸¬ã§ããšã€åŠ¹æœæ¸¬å®šã«å›°ã£ã¦ã„ã¾ã—ãŸã€‚

APIãŒç„¡ã„ã‹ã€å®šæœŸçš„ã«æ¢ã—ã¦ã„ãŸã®ã§ã™ãŒã€ã¤ã„ã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’è¦‹ã¤ã‘ãŸã®ã§è©¦ã—ã¦ã¿ã¾ã—ãŸã€‚

# çµè«–
ã‚¢ãƒ«ãƒ•ã‚¡ç‰ˆã®APIã§ã¯ã‚ã‚‹ãŒã€`/orgs/{org}/copilot/usage`ã§çµ„ç¹”ã®Copilotåˆ©ç”¨çŠ¶æ³ãŒå–å¾—ã§ãã‚‹ã€‚

https://docs.github.com/en/early-access/copilot/copilot-usage-api

ä¸‹è¨˜ã®ã‚ˆã†ã«æ—¥åˆ¥ã«**ä½•è¡Œææ¡ˆã•ã‚Œã€ä½•è¡Œæ¡ç”¨ã•ã‚ŒãŸã‹**ãŒã€è¨€èªã€ã‚¨ãƒ‡ã‚£ã‚¿ã”ã¨ã«å–å¾—å¯èƒ½ã€‚
```json
{
    "day": "2023-10-15",
    "total_suggestions_count": 1000,
    "total_acceptances_count": 800,
    "total_lines_suggested": 1800,
    "total_lines_accepted": 1200,
    "total_active_users": 8,
    "breakdown": [
      {
        "language": "python",
        "editor": "vscode",
        "suggestions_count": 300,
        "acceptances_count": 250,
        "lines_suggested": 900,
        "lines_accepted": 700,
        "active_users": 5
      },
      {
        "language": "python",
        "editor": "jetbrains",
        "suggestions_count": 300,
        "acceptances_count": 200,
        "lines_suggested": 400,
        "lines_accepted": 300,
        "active_users": 2
      },
      {
        "language": "ruby",
        "editor": "vscode",
        "suggestions_count": 400,
        "acceptances_count": 350,
        "lines_suggested": 500,
        "lines_accepted": 200,
        "active_users": 4
      }
    ]
}
```

ç­†è€…ã®ç›´è¿‘1ãƒ¶æœˆã®æ¡ç”¨ç‡acceptance_rateã¯**21.5%**ã§ã—ãŸã€‚ï¼ˆ1234/5751ï¼‰

# ğŸŒ³ç’°å¢ƒ
- MacBook Air (M1, 2020)
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
- 2024å¹´3æœˆ15æ—¥ã«æ¤œè¨¼ 

# GitHub CLIå°å…¥
ã€Œçµè«–ã€ã§å‡ºã‚ªãƒã§ã™ã€‚ã‚ã¨ã¯GitHubã®APIã‚’å©ãã®ã¿ã€‚

æœ¬è¨˜äº‹ã§ã¯GitHub CLIã‚’ä½¿ã„ã¾ã—ãŸã€‚GitHub Access Tokenã‚’ç”¨æ„ã™ã‚Œã°Node.jsã§ã‚‚Postmanã§ã‚‚è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚

## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
homebrewã‚’ä½¿ç”¨ã€‚

```sh
$brew install gh
```
https://github.com/cli/cli#installation

## ãƒ­ã‚°ã‚¤ãƒ³
```sh
$gh auth login
```

CLIã®æŒ‡ç¤ºã«å¾“ã£ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚ã“ã®ã¨ãã€ãƒ­ã‚°ã‚¤ãƒ³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯çµ„ç¹”ã®ownerã¾ãŸã¯billing managerã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚


>You must be an owner or billing manager of an organization with a Copilot Business subscription, or an owner or billing manager of its parent enterprise, to view Copilot usage metrics.
>https://docs.github.com/en/early-access/copilot/copilot-usage-api

CLIã®æŒ‡ç¤ºã«å¾“ã£ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹æ–¹æ³•ã‚’é¸æŠã—ã¾ã—ãŸã€‚
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2722903/2ed9a62d-038a-553e-f047-ee16bc43a62b.png)

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2722903/fda6b975-fab2-a90c-2812-bde7eedc7073.png)

CLIã«ãƒ¯ãƒ³ã‚¿ã‚¤ãƒ ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§å…¥åŠ›ã—ã¾ã™ã€‚
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2722903/99d31605-deb4-2c89-c9cd-00181ba75cda.png)

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2722903/3460f65d-0af7-8503-b1ad-68a512cc2357.png)


# APIã‚’å‘¼ã¶
GitHub CLIã ã¨èªè¨¼ã•ã‚ŒãŸçŠ¶æ…‹ã§GitHub APIã‚’å‘¼ã¶ã“ã¨ãŒã§ãã¾ã™ã€‚

https://cli.github.com/manual/gh_api

è¦šãˆãŸã¦ã®`/orgs/{org}/copilot/usage`ã‚’å‘¼ã‚“ã§ã¿ã¾ã™ã€‚
`{org}`ã«ã¯å–å¾—ã™ã‚‹çµ„ç¹”åã‚’å…¥ã‚Œã¾ã™ã€‚
```sh
$gh api /orgs/{org}/copilot/usage
```
https://docs.github.com/en/early-access/copilot/copilot-usage-api


```
gh: This API operation needs the "admin:enterprise" scope. To request it, run:  gh auth refresh -h github.com -s admin:enterprise
```

scopeä¸è¶³ã§ãƒ€ãƒ¡ã§ã—ãŸã€‚

æ°—ã‚’å–ã‚Šç›´ã—ã¦æŒ‡ç¤ºé€šã‚Šã€

```
$gh auth refresh -h github.com -s admin:enterprise
```

ã‚’å®Ÿè¡Œã—ã¦ã€å†åº¦`gh api`ã§æˆåŠŸã—ã¾ã—ãŸã€‚[^1]

[^1]: æˆåŠŸã—ã¦ã—ã¾ã£ãŸã®ã§ç­†è€…ã®ç’°å¢ƒã§ã®æ¤œè¨¼ã¯ã§ãã¾ã›ã‚“ã§ã—ãŸãŒã€ãƒ­ã‚°ã‚¤ãƒ³ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«orgã®æ¨©é™ãŒè¶³ã‚Šãªã„å ´åˆãªã©ã¯å¤±æ•—ã™ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚

# ãƒ¬ã‚¹ãƒãƒ³ã‚¹
1ãƒ¶æœˆç¨‹åº¦ã®ä½¿ç”¨ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—ã§ãã¾ã—ãŸã€‚
ã‚¢ãƒ«ãƒ•ã‚¡ç‰ˆãªã®ã§ç²¾åº¦ãŒä¸å®‰ã§ã™ãŒã€`total_active_users`ã¯æ­£ã—ãã€è¨€èªãƒ»ã‚¨ãƒ‡ã‚£ã‚¿ã‚‚æ­£ç¢ºã«è¦‹ãˆã¾ã™ã€‚

2/20ã¯ç­†è€…ã¯æœ‰çµ¦ã‚’å–ã£ãŸã®ã§å°‘ãªããªã£ã¦ã„ã¾ã™ã€‚

```json
[
  {
    "day": "2024-02-19",
    "total_suggestions_count": 511,
    "total_acceptances_count": 81,
    "total_lines_suggested": 762,
    "total_lines_accepted": 107,
    "total_active_users": 2,
    "breakdown": [
      {
        "language": "javascript",
        "editor": "vscode",
        "suggestions_count": 307,
        "acceptances_count": 49,
        "lines_suggested": 466,
        "lines_accepted": 67,
        "active_users": 2
      },
      {
        "language": "ruby",
        "editor": "vscode",
        "suggestions_count": 64,
        "acceptances_count": 9,
        "lines_suggested": 91,
        "lines_accepted": 9,
        "active_users": 2
      },
      {
        "language": "typescript",
        "editor": "vscode",
        "suggestions_count": 72,
        "acceptances_count": 9,
        "lines_suggested": 100,
        "lines_accepted": 11,
        "active_users": 2
      },
      {
        "language": "vue",
        "editor": "vscode",
        "suggestions_count": 64,
        "acceptances_count": 14,
        "lines_suggested": 96,
        "lines_accepted": 20,
        "active_users": 2
      },
      {
        "language": "html+erb",
        "editor": "vscode",
        "suggestions_count": 4,
        "acceptances_count": 0,
        "lines_suggested": 9,
        "lines_accepted": 0,
        "active_users": 1
      }
    ]
  },
  {
    "day": "2024-02-20",
    "total_suggestions_count": 6,
    "total_acceptances_count": 3,
    "total_lines_suggested": 7,
    "total_lines_accepted": 3,
    "total_active_users": 2,
    "breakdown": [
      {
        "language": "ruby",
        "editor": "vscode",
        "suggestions_count": 5,
        "acceptances_count": 2,
        "lines_suggested": 6,
        "lines_accepted": 2,
        "active_users": 2
      },
      {
        "language": "html+erb",
        "editor": "vscode",
        "suggestions_count": 1,
        "acceptances_count": 1,
        "lines_suggested": 1,
        "lines_accepted": 1,
        "active_users": 2
      }
    ]
  },
  [...]
  {
    "day": "2024-03-14",
    "total_suggestions_count": 95,
    "total_acceptances_count": 33,
    "total_lines_suggested": 118,
    "total_lines_accepted": 43,
    "total_active_users": 2,
    "breakdown": [
      {
        "language": "properties",
        "editor": "vscode",
        "suggestions_count": 1,
        "acceptances_count": 0,
        "lines_suggested": 1,
        "lines_accepted": 0,
        "active_users": 1
      },
      {
        "language": "ssh_config",
        "editor": "vscode",
        "suggestions_count": 1,
        "acceptances_count": 0,
        "lines_suggested": 1,
        "lines_accepted": 0,
        "active_users": 1
      },
      {
        "language": "javascript",
        "editor": "vscode",
        "suggestions_count": 54,
        "acceptances_count": 24,
        "lines_suggested": 66,
        "lines_accepted": 28,
        "active_users": 2
      },
      {
        "language": "typescript",
        "editor": "vscode",
        "suggestions_count": 22,
        "acceptances_count": 5,
        "lines_suggested": 25,
        "lines_accepted": 5,
        "active_users": 2
      },
      {
        "language": "vue",
        "editor": "vscode",
        "suggestions_count": 17,
        "acceptances_count": 4,
        "lines_suggested": 25,
        "lines_accepted": 10,
        "active_users": 2
      }
    ]
  }
]
```

`acceptances_count`ã¨`suggestions_count`ã‚’è¨ˆç®—ã™ã‚‹ã¨

```
1234/5751
0.21457137889062772
```

ã¤ã¾ã‚Šã€**21.5%** ç¨‹åº¦ã®æ¡ç”¨ç‡ï¼ˆAcceptance Rateï¼‰ã§ã‚ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚
è¡Œæ•°ã§è¦‹ã‚‹ã¨**23.6%** ç¨‹åº¦ã€‚

ãŸã¶ã‚“ãƒ¢ãƒ‹ã‚¿ãƒ¼çš„ãªæ„Ÿã˜ã ã¨æ€ã„ã¾ã™ãŒã€ã„ãã¤ã‹ã®ä¼æ¥­ãŒGitHubã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚‚ã‚‰ã£ã¦æ¤œè¨¼è¨˜äº‹ã‚’å‡ºã—ã¦ã„ã¾ã™ãŒã€ã©ã“ã‚‚3å‰²ãã‚‰ã„ã§ã—ãŸã€‚

- KAGï¼ˆKDDIã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºã‚»ãƒ³ã‚¿ãƒ¼ï¼‰ã•ã‚“
https://developers.kddi.com/blog/70lix5UbfLU0k0AnJq5JzY

- SANSANã•ã‚“[^2]
https://buildersbox.corp-sansan.com/entry/2023/09/01/110000

- GMOãƒšãƒ‘ãƒœã•ã‚“
https://tech.pepabo.com/2023/08/30/github-copilot-effects/

- ã‚µã‚¤ãƒãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã•ã‚“
https://developers.cyberagent.co.jp/blog/archives/43059/

[^2]:no pun intended

JavaScriptãŒæ¯”è¼ƒçš„å¤šã„æ—¥ã‚‚ã‚ã‚Šã¾ã—ãŸã€‚ä½•ã‚’ã—ãŸæ—¥ã‹ã¨æŒ¯ã‚Šè¿”ã£ã¦ã¿ãŸã¨ã“ã‚ã€ã‚€ã¹ãªã‚‹ã‹ãªã€jestã‚’æ›¸ããªãŒã‚‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã‚’ã—ã¾ãã£ã¦ã„ãŸæ—¥ã§ã—ãŸã€‚
```json
      {
        "language": "javascript",
        "editor": "vscode",
        "suggestions_count": 845,
        "acceptances_count": 205,
        "lines_suggested": 1681,
        "lines_accepted": 416,
        "active_users": 2
      },
```

# ãŠã‚ã‚Šã«
ç™ºè¦‹ã—ãŸ`/orgs/{org}/copilot/usage`ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ã£ã¦ã€GitHub Copilotã®åˆ©ç”¨çµ±è¨ˆã‚’å–å¾—ã—ã¦ã¿ã¾ã—ãŸã€‚

æ•°å­—ã®æ­£ç¢ºåº¦ã¯ãã£ã¡ã‚Šæ¤œè¨¼ã—ã¦ã„ã¾ã›ã‚“ãŒã€å°‘ãªãã¨ã‚‚ç­†è€…ã®ç’°å¢ƒã§ã¯å¤§ããå¤–ã‚Œã¦ã¯ã„ãªã„ã‚ˆã†ã«æ€ã„ã¾ã—ãŸã€‚

å…¬å¼ã§ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒæä¾›ã•ã‚Œã‚‹ã¨ä¸€ç•ªå¬‰ã—ã„ã®ã§ã™ãŒã€ã²ã¨ã¾ãšGitHub Copilotã®å®šé‡çš„ãªåŠ¹æœæ¤œè¨¼ã‚’ã™ã‚‹æ–¹æ³•ã®é¸æŠè‚¢ã«ã¯ãªã‚Šã†ã‚‹ã®ã§ã¯ãªã„ã‹ã¨æ€ã„ã¾ã™ã€‚

## å‚è€ƒ
https://github.com/orgs/community/discussions/54691
